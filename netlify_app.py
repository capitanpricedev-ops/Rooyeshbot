import logging
import os
from collections import defaultdict
from typing import Dict

from telegram import (
    Update,
    InlineKeyboardButton,
    InlineKeyboardMarkup,
)
from telegram.ext import (
    ApplicationBuilder,
    CommandHandler,
    CallbackQueryHandler,
    ConversationHandler,
    ContextTypes,
)

# ---------- ØªÙ†Ø¸ÛŒÙ… Ù„Ø§Ú¯ ----------
logging.basicConfig(
    format="%(asctime)s - %(name)s - %(levelname)s - %(message)s", level=logging.INFO
)
logger = logging.getLogger(__name__)

# ---------- Ø­Ø§Ù„Ø§Øª Ú¯ÙØªÚ¯Ùˆ ----------
ASKING_QUESTION = 1

# ---------- Ø³ÙˆØ§Ù„Ø§Øª (Ù†Ù…ÙˆÙ†Ù‡: 75 Ø³ÙˆØ§Ù„) ----------
questions = [
    # ... (ØªÙ…Ø§Ù… 75 Ø³ÙˆØ§Ù„ Ø´Ù…Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ù‡Ø³ØªÙ†Ø¯ - Ø¨Ø±Ø§ÛŒ Ú©ÙˆØªØ§Ù‡ÛŒ Ø­Ø°Ù Ø´Ø¯) ...
    "Ø§ØºÙ„Ø¨ ÙƒØ³ÙŠ Ø±Ø§ Ù†Ø¯Ø§Ø´ØªÙ‡ Ø§Ù… ÙƒÙ‡ Ø§Ø² Ù…Ù† Ø­Ù…Ø§ÙŠØª ÙƒÙ†Ø¯ØŒ Ø­Ø±Ù Ù‡Ø§ÙŠØ´ Ø±Ø§ Ø¨Ø§ Ù…Ù† Ø¨Ø²Ù†Ø¯ Ùˆ Ø¹Ù…ÙŠÙ‚Ø§ Ù†Ú¯Ø±Ø§Ù† Ø§ØªÙØ§Ù‚Ø§ØªÙŠ Ø¨Ø§Ø´Ø¯ ÙƒÙ‡ Ø¨Ø±Ø§ÙŠÙ… Ù…ÙŠ Ø§ÙØªØ¯.",
    "Ø¨Ù‡ Ø·ÙˆØ± ÙƒÙ„ÙŠØŒ ÙƒØ³ÙŠ Ù†Ø¨ÙˆØ¯Ù‡ ÙƒÙ‡ Ø¨Ù‡ Ù…Ù† Ø¹Ø§Ø·ÙÙ‡ØŒ Ù…Ø­Ø¨Øª Ùˆ ØµØ¯Ø§Ù‚Øª Ù†Ø´Ø§Ù† Ø¯Ù‡Ø¯.",
    "Ø¯Ø± Ø¨ÙŠØ´ØªØ± Ø§ÙˆÙ‚Ø§Øª Ø²Ù†Ø¯Ú¯ÙŠØŒ Ø§ÙŠÙ† Ø§Ø­Ø³Ø§Ø³ Ø¨Ù‡ Ù…Ù† Ø¯Ø³Øª Ù†Ø¯Ø§Ø¯ ÙƒÙ‡ Ø¨Ø±Ø§ÙŠ ÙØ±Ø¯ Ø¯ÙŠÚ¯Ø±ÙŠØŒ Ø´Ø®Øµ ÙˆÙŠÚ˜Ù‡ Ùˆ Ù…Ù…ØªØ§Ø²ÙŠ Ø¨Ù‡ Ø´Ù…Ø§Ø± Ù…ÙŠ Ø±ÙˆÙ….",
    "Ø¯Ø± ØºØ§Ù„Ø¨ Ø§ÙˆÙ‚Ø§Øª ÙƒØ³ÙŠ Ø±Ø§ Ù†Ø¯Ø§Ø´ØªÙ… ÙƒÙ‡ ÙˆØ§Ù‚Ø¹Ø§ Ø¯Ø± Ø¯Ù„ Ø¨Ù‡ Ù…Ù† Ú¯ÙˆØ´ Ø¯Ù‡Ø¯ØŒ Ù…Ø±Ø§ Ø¨ÙÙ‡Ù…Ø¯ ÙŠØ§ Ø§ÙŠÙ† ÙƒÙ‡ Ø§Ø­Ø³Ø§Ø³ Ù‡Ø§ Ùˆ Ù†ÙŠØ§Ø²Ù‡Ø§ÙŠ ÙˆØ§Ù‚Ø¹ÙŠ Ù…Ø±Ø§ Ø¯Ø±Ùƒ ÙƒÙ†Ø¯.",
    "ÙˆÙ‚ØªÙŠ ÙƒÙ‡ Ù†Ù…ÙŠ Ø¯Ø§Ù†Ø³ØªÙ… ÙƒØ§Ø±ÙŠ Ø±Ø§ Ú†Ú¯ÙˆÙ†Ù‡ Ø§Ù†Ø¬Ø§Ù… Ø¯Ù‡Ù…ØŒ Ø¨Ù‡ Ù†Ø¯Ø±Øª Ø´Ø®ØµÙŠ Ù¾ÙŠØ¯Ø§ Ù…ÙŠ Ø´Ø¯ ÙƒÙ‡ Ù…Ø±Ø§ Ù†ØµÙŠØ­Øª Ùˆ Ø±Ø§Ù‡Ù†Ù…Ø§ÙŠÙŠ ÙƒÙ†Ø¯.",
    "Ù…Ù† Ø¨Ù‡ Ø§ÙØ±Ø§Ø¯ Ù†Ø²Ø¯ÙŠÙƒ Ø®ÙˆØ¯Ù… Ø®ÙŠÙ„ÙŠ ÙˆØ§Ø¨Ø³ØªÙ‡ Ø§Ù…ØŒ Ú†ÙˆÙ† Ù…ÙŠ ØªØ±Ø³Ù… Ù…Ø±Ø§ ØªØ±Ùƒ ÙƒÙ†Ù†Ø¯.",
    "Ø¢Ù†Ù‚Ø¯Ø± Ø¨Ù‡ Ø¯ÙŠÚ¯Ø±Ø§Ù† Ù†ÙŠØ§Ø²Ù…Ù†Ø¯Ù… ÙƒÙ‡ Ù†Ú¯Ø±Ø§Ù† Ø§Ø² Ø¯Ø³Øª Ø¯Ø§Ø¯Ù† Ø¢Ù†Ù‡Ø§ Ù‡Ø³ØªÙ….",
    "Ù†Ú¯Ø±Ø§Ù†Ù… Ù…Ø¨Ø§Ø¯Ø§ Ù†Ø²Ø¯ÙŠÙƒØ§Ù†Ù… Ù…Ø±Ø§ ØªØ±Ùƒ ÙƒÙ†Ù†Ø¯.",
    "ÙˆÙ‚ØªÙŠ Ø§Ø­Ø³Ø§Ø³ Ù…ÙŠ ÙƒÙ†Ù… ÙƒØ³ÙŠ ÙƒÙ‡ Ø¨Ø±Ø§ÙŠÙ… Ù…Ù‡Ù… Ø§Ø³Øª Ø§Ø² Ù…Ù† Ø¯ÙˆØ±ÙŠ Ù…ÙŠ ÙƒÙ†Ø¯ØŒ Ù…Ø§ÙŠÙˆØ³ Ù…ÙŠ Ø´ÙˆÙ….",
    "Ø¨Ø±Ø®ÙŠ Ø§ÙˆÙ‚Ø§Øª Ø¢Ù†Ù‚Ø¯Ø± Ù†Ú¯Ø±Ø§Ù† Ù‡Ø³ØªÙ… ÙƒÙ‡ Ù…Ø±Ø¯Ù… Ù…Ø±Ø§ ØªØ±Ùƒ ÙƒÙ†Ù†Ø¯ ÙƒÙ‡ Ø¢Ù†Ù‡Ø§ Ø±Ø§ Ø§Ø² Ø®ÙˆØ¯Ù… Ù…ÙŠ Ø±Ø§Ù†Ù….",
    "Ø§Ø­Ø³Ø§Ø³ Ù…ÙŠ ÙƒÙ†Ù… Ù…Ø±Ø¯Ù… Ø§Ø² Ù…Ù† Ø³ÙˆØ¯Ø¬ÙˆÙŠÙŠ Ù…ÙŠ ÙƒÙ†Ù†Ø¯.",
    "Ø§Ø­Ø³Ø§Ø³ Ù…ÙŠ ÙƒÙ†Ù… Ø¨Ø§ÙŠØ¯ Ø¯Ø± Ø­Ø¶ÙˆØ± Ø¯ÙŠÚ¯Ø±Ø§Ù† Ø§Ø² Ø®ÙˆØ¯Ù… Ù…Ø­Ø§ÙØ¸Øª ÙƒÙ†Ù…ØŒ Ú†ÙˆÙ† Ø¯Ø± ØºÙŠØ± Ø§ÙŠÙ† ØµÙˆØ±Øª Ø¨Ù‡ Ù…Ù† Ø¢Ø³ÙŠØ¨ Ù…ÙŠ Ø²Ù†Ù†Ø¯.",
    "Ø¯ÙŠÚ¯Ø±Ø§Ù† Ø¯ÙŠØ± ÙŠØ§ Ø²ÙˆØ¯ Ø¨Ù‡ Ù…Ù† Ø®ÙŠØ§Ù†Øª Ù…ÙŠ ÙƒÙ†Ù†Ø¯.",
    "Ù†Ø³Ø¨Øª Ø¨Ù‡ Ø§Ù†Ú¯ÙŠØ²Ù‡ Ù‡Ø§ÙŠ Ø¯ÙŠÚ¯Ø±Ø§Ù† Ø³ÙˆØ¡ Ø¸Ù† Ø´Ø¯ÙŠØ¯ Ø¯Ø§Ø±Ù….",
    "Ù…Ø¹Ù…ÙˆÙ„Ø§ Ø¨Ù‡ Ø·ÙˆØ± Ø¬Ø¯ÙŠ Ø¨Ù‡ Ø§Ù†Ú¯ÙŠØ²Ù‡ Ù‡Ø§ÙŠ Ù†Ù‡Ø§Ù†ÙŠ Ù…Ø±Ø¯Ù… ÙÙƒØ± Ù…ÙŠ ÙƒÙ†Ù….",
    "ÙˆØµÙ„Ù‡ Ù†Ø§Ø¬ÙˆØ± Ø§Ø¬ØªÙ…Ø§Ø¹ Ù‡Ø³ØªÙ….",
    "Ø§Ø³Ø§Ø³Ø§ Ø¨Ø§ Ø¨Ù‚ÙŠÙ‡ Ø®ÙŠÙ„ÙŠ ÙØ±Ù‚ Ø¯Ø§Ø±Ù….",
    "Ù†Ù…ÙŠ ØªÙˆØ§Ù†Ù… Ø¨Ù‡ ÙƒØ³ÙŠ ØªØ¹Ù„Ù‚ Ø®Ø§Ø·Ø± Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ù…ØŒ Ø§Ù†Ø³Ø§Ù† Ú¯ÙˆØ´Ù‡ Ú¯ÙŠØ±ÙŠ Ù‡Ø³ØªÙ….",
    "Ø§Ø­Ø³Ø§Ø³ Ù…ÙŠ ÙƒÙ†Ù… Ø§Ø² Ù…Ø±Ø¯Ù… Ø¨ÙŠÚ¯Ø§Ù†Ù‡ Ø´Ø¯Ù‡ Ø§Ù….",
    "Ù‡Ù…ÙŠØ´Ù‡ Ø§Ø­Ø³Ø§Ø³ Ù…ÙŠ ÙƒÙ†Ù… Ø¯Ø± Ø¬Ù…Ø¹ØŒ Ø¬Ø§ÙŠÙŠ Ù†Ø¯Ø§Ø±Ù….",
    "Ù…Ø±Ø¯Ø§Ù† ÙŠØ§ Ø²Ù†Ø§Ù†ÙŠ ÙƒÙ‡ Ø¯ÙˆØ³ØªØ´Ø§Ù† Ø¯Ø§Ø±Ù…ØŒ ÙˆÙ‚ØªÙŠ Ù†Ù‚Ø§Ø· Ø¶Ø¹Ù Ù…Ø±Ø§ Ø¨Ø¨ÙŠÙ†Ù†Ø¯ØŒ Ø¯ÙŠÚ¯Ø± Ø¯ÙˆØ³ØªÙ… Ù†Ø¯Ø§Ø±Ù†Ø¯.",
    "Ø§Ú¯Ø± ÙƒØ³ÙŠ ÙˆØ§Ù‚Ø¹Ø§ Ù…Ø±Ø§ Ø¨Ø´Ù†Ø§Ø³Ø¯ØŒ Ø¯ÙˆØ³Øª Ù†Ø¯Ø§Ø±Ø¯ Ø¨Ø§ Ù…Ù† Ø±Ø§Ø¨Ø·Ù‡ Ø§ÙŠ ØµÙ…ÙŠÙ…ÙŠ Ø¨Ø±Ù‚Ø±Ø§Ø± ÙƒÙ†Ø¯.",
    "Ù„ÙŠØ§Ù‚Øª Ø¹Ø´Ù‚ØŒ ØªÙˆØ¬Ù‡ Ùˆ Ø§Ø­ØªØ±Ø§Ù… Ø¯ÙŠÚ¯Ø±Ø§Ù† Ø±Ø§ Ù†Ø¯Ø§Ø±Ù….",
    "Ø§Ø­Ø³Ø§Ø³ Ù…ÙŠ ÙƒÙ†Ù… Ù‡ÙŠÚ† ÙƒØ³ Ù…Ø±Ø§ Ø¯ÙˆØ³Øª Ù†Ø¯Ø§Ø±Ø¯.",
    "Ø¯Ø± Ø¨Ø³ÙŠØ§Ø±ÙŠ Ø§Ø² Ø¬Ù†Ø¨Ù‡ Ù‡Ø§ØŒ Ø¨ÙŠØ´ Ø§Ø² Ø¢Ù† Ù†Ø§Ù¾Ø°ÙŠØ±ÙØªÙ†ÙŠ Ù‡Ø³ØªÙ… ÙƒÙ‡ Ø¨ØªÙˆØ§Ù†Ù… Ø®ÙˆØ¯Ù… Ø±Ø§ Ø¨Ù‡ Ø¯ÙŠÚ¯Ø±Ø§Ù† Ù†Ø´Ø§Ù† Ø¨Ø¯Ù‡Ù….",
    "ØªÙ‚Ø±ÙŠØ¨Ø§ Ù‡ÙŠÚ† ÙƒØ§Ø±ÙŠ Ø±Ø§ Ù†Ù…ÙŠ ØªÙˆØ§Ù†Ù… Ø¨Ù‡ Ø®ÙˆØ¨ÙŠ Ø¯ÙŠÚ¯Ø±Ø§Ù† Ø§Ù†Ø¬Ø§Ù… Ø¯Ù‡Ù….",
    "ÙˆÙ‚ØªÙŠ Ø¨Ù‡ Ù…ÙˆÙÙ‚ÙŠØª Ù†Ø²Ø¯ÙŠÙƒ Ù…ÙŠ Ø´ÙˆÙ… Ø§Ø² Ø¯Ø±ÙˆÙ† Ø§Ø­Ø³Ø§Ø³ Ø¨ÙŠ ÙƒÙØ§ÙŠØªÙŠ Ù…ÙŠ ÙƒÙ†Ù….",
    "Ø¨ÙŠØ´ØªØ± Ù…Ø±Ø¯Ù… Ø¯Ø± Ø­ÙˆØ²Ù‡ Ù‡Ø§ÙŠ Ø´ØºÙ„ÙŠ Ùˆ ÙƒØ§Ø±ÙŠ Ø§Ø² Ù…Ù† ØªÙˆØ§Ù†Ø§ØªØ±Ù†Ø¯.",
    "Ù†Ù…ÙŠ ØªÙˆØ§Ù†Ù… Ù…Ø§Ù†Ù†Ø¯ Ø§ØºÙ„Ø¨ Ù…Ø±Ø¯Ù… Ø¯Ø± ÙƒØ§Ø±Ù‡Ø§ÙŠÙ… Ø¨Ø§ Ø§Ø³ØªØ¹Ø¯Ø§Ø¯ Ø¨Ø§Ø´Ù….",
    "Ø¯Ø± ÙƒØ§Ø± ÙŠØ§ ØªØ­ØµÙŠÙ„ØŒ Ù…Ø«Ù„ Ø¨Ù‚ÙŠÙ‡ Ø¨Ø§Ù‡ÙˆØ´ Ù†ÙŠØ³ØªÙ….",
    "Ø§Ø­Ø³Ø§Ø³ Ù†Ù…ÙŠ ÙƒÙ†Ù… Ù†Ù…ÙŠ ØªÙˆØ§Ù†Ù… Ø¨Ù‡ ØªÙ†Ù‡Ø§ÙŠÙŠ Ø§Ø² Ù¾Ø³ ÙƒØ§Ø±Ù‡Ø§ÙŠ Ø²Ù†Ø¯Ú¯ÙŠ Ø±ÙˆØ²Ù…Ø±Ù‡ Ø§Ù… Ø¨Ø±Ø¨ÙŠØ§ÙŠÙ….",
    "ÙÙƒØ± Ù…ÙŠ ÙƒÙ†Ù… Ø¯Ø± Ø§Ù†Ø¬Ø§Ù… ÙƒØ§Ø±Ù‡Ø§ÙŠ Ø±ÙˆØ²Ù…Ø±Ù‡ØŒ Ø¢Ø¯Ù… ÙˆØ§Ø¨Ø³ØªÙ‡ Ø§ÙŠ Ù‡Ø³ØªÙ….",
    "ÙØ§Ù‚Ø¯ Ø¹Ù‚Ù„ Ø³Ù„ÙŠÙ… Ù‡Ø³ØªÙ….",
    "Ø§ØµÙ„Ø§ Ø¨Ù‡ Ù‚Ø¶Ø§ÙˆØª Ù‡Ø§ÙŠ Ø®ÙˆØ¯Ù… Ø¯Ø± Ù…ÙˆÙ‚Ø¹ÙŠØª Ù‡Ø§ÙŠ Ø±ÙˆØ²Ù…Ø±Ù‡ØŒ Ø§Ø¹ØªÙ…Ø§Ø¯ Ù†Ø¯Ø§Ø±Ù….",
    "Ø§Ø­Ø³Ø§Ø³ Ù…ÙŠ ÙƒÙ†Ù… Ù†Ù…ÙŠ ØªÙˆØ§Ù†Ù… Ø¨Ù‡ ØªÙ†Ù‡Ø§ÙŠÙŠ Ú¯Ù„ÙŠÙ… Ø®ÙˆØ¯Ù… Ø±Ø§ Ø§Ø² Ø¢Ø¨ Ø¨ÙŠØ±ÙˆÙ† Ø¨ÙƒØ´Ù….",
    "Ù†Ù…ÙŠ ØªÙˆØ§Ù†Ù… Ø§Ø² Ø´Ø± Ø§ÙŠÙ† Ø§Ø­Ø³Ø§Ø³ Ø±Ù‡Ø§ Ø´ÙˆÙ… ÙƒÙ‡ Ø§ØªÙØ§Ù‚ Ø¨Ø¯ÙŠ Ù…ÙŠ Ø®ÙˆØ§Ù‡Ø¯ Ø¨ÙŠÙØªØ¯.",
    "Ø§Ø­Ø³Ø§Ø³ Ù…ÙŠ ÙƒÙ†Ù… Ù‡Ø± Ù„Ø­Ø¸Ù‡ Ù…Ù…ÙƒÙ† Ø§Ø³Øª ÙŠÙƒ ÙØ§Ø¬Ø¹Ù‡ Ø·Ø¨ÙŠØ¹ÙŠØŒ Ø¬Ù†Ø§ÙŠÙŠØŒ Ø­Ù‚ÙˆÙ‚ÙŠ ÙŠØ§ Ù¾Ø²Ø´ÙƒÙŠ Ø¨Ø±Ø§ÙŠÙ… Ø§ØªÙØ§Ù‚ Ø¨ÙŠÙØªØ¯.",
    "Ù…ÙŠ ØªØ±Ù… Ù…ÙˆØ±Ø¯ Ø­Ù…Ù„Ù‡ Ù‚Ø±Ø§Ø± Ø¨Ú¯ÙŠØ±Ù….",
    "Ù…ÙŠ ØªØ±Ø³Ù… ØªÙ…Ø§Ù… Ø³Ø±Ù…Ø§ÙŠÙ‡ Ø®ÙˆØ¯Ù… Ø±Ø§ Ø§Ø² Ø¯Ø³Øª Ø¨Ø¯Ù‡Ù… Ùˆ Ø¨ÙŠÚ†Ø§Ø±Ù‡ Ø´ÙˆÙ….",
    "Ø§ØºÙ„Ø¨ Ù†Ú¯Ø±Ø§Ù†Ù… Ø¯Ú†Ø§Ø± Ø³ÙƒØªÙ‡ Ù‚Ù„Ø¨ÙŠ Ø¨Ø´ÙˆÙ…ØŒ Ø­ØªÙŠ ÙˆÙ‚ØªÙŠ Ø¯Ù„Ø§ÙŠÙ„ Ù¾Ø²Ø´ÙƒÙŠ ÙƒÙ…ÙŠ Ø¨Ø±Ø§ÙŠ Ø§ÙŠÙ† Ø§Ø­ØªÙ…Ø§Ù„ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯.",
    "Ù‚Ø§Ø¯Ø± Ù†ÙŠØ³ØªÙ… Ø§Ø² ÙˆØ§Ù„Ø¯ÙŠÙ†Ù… Ø¬Ø¯Ø§ Ø´ÙˆÙ…ØŒ ÙƒØ§Ø±ÙŠ ÙƒÙ‡ Ù‡Ù… Ø³Ù† Ùˆ Ø³Ø§Ù„ Ù‡Ø§ÙŠÙ… Ø§Ù†Ø¬Ø§Ù… Ù…ÙŠ Ø¯Ù‡Ù†Ø¯.",
    "Ù…Ù† Ùˆ ÙˆØ§Ù„Ø¯ÙŠÙ†Ù… ØªÙ…Ø§ÙŠÙ„ Ø¯Ø§Ø±ÙŠÙ… Ø®ÙˆØ¯ Ø±Ø§ Ø¨ÙŠØ´ Ø§Ø² Ø­Ø¯ Ø¯Ø± Ù…Ø´ÙƒÙ„Ø§Øª Ø²Ù†Ø¯Ú¯ÙŠ ÙŠÙƒØ¯ÙŠÚ¯Ø± Ø¯Ø±Ú¯ÙŠØ± ÙƒÙ†ÙŠÙ….",
    "Ø§Ú¯Ø± Ù…Ù† Ùˆ ÙˆØ§Ù„Ø¯ÙŠÙ†Ù…ØŒ Ù…Ø³Ø§ÙŠÙ„ Ø¬Ø²Ø¦ÙŠ Ùˆ Ø®ØµÙˆØµÙŠ Ø®ÙˆØ¯ Ø±Ø§ Ø§Ø² ÙŠÙƒØ¯ÙŠÚ¯Ø± Ù¾Ù†Ù‡Ø§Ù† ÙƒÙ†ÙŠÙ…ØŒ Ø§Ø­Ø³Ø§Ø³ Ú¯Ù†Ø§Ù‡ ÙŠØ§ Ø®ÙŠØ§Ù†Øª Ù…ÙŠ ÙƒÙ†ÙŠÙ….",
    "Ø§ØºÙ„Ø¨ Ø§Ø­Ø³Ø§Ø³ Ù…ÙŠ ÙƒÙ†Ù… ÙƒÙ‡ Ø§Ù†Ú¯Ø§Ø± ÙˆØ§Ù„Ø¯ÙŠÙ†Ù… Ø¯Ø§Ø¦Ù… Ø¨Ø§ Ù…Ù† Ø²Ù†Ø¯Ú¯ÙŠ Ù…ÙŠ ÙƒÙ†Ù†Ø¯ ... Ù†Ù…ÙŠ ØªÙˆØ§Ù†Ù… ÙŠÙƒ Ø²Ù†Ø¯Ú¯ÙŠ Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡ Ø¨Ø±Ø§ÙŠ Ø®ÙˆØ¯Ù… Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ù….",
    "Ø§ØºÙ„Ø¨ Ø§Ø­Ø³Ø§Ø³ Ù…ÙŠ ÙƒÙ†Ù… Ù‡ÙˆÙŠØª Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡ Ø§ÙŠ Ø§Ø² ÙˆØ§Ù„Ø¯ÙŠÙ† Ùˆ Ù‡Ù…Ø³Ø±Ù… Ù†Ø¯Ø§Ø±Ù….",
    "ÙÙƒØ± Ù…ÙŠ ÙƒÙ†Ù… Ø§Ú¯Ø± ÙƒØ§Ø±ÙŠ Ø±Ø§ Ø¨ÙƒÙ†Ù… ÙƒÙ‡ Ø¯Ù„Ù… Ù…ÙŠ Ø®ÙˆØ§Ù‡Ø¯ØŒ Ø¨Ø±Ø§ÙŠ Ø®ÙˆØ¯Ù… Ø¯Ø±Ø¯Ø³Ø± Ø¯Ø±Ø³Øª Ù…ÙŠ ÙƒÙ†Ù….",
    "Ø§Ø­Ø³Ø§Ø³ Ù…ÙŠ ÙƒÙ†Ù… Ú†Ø§Ø±Ù‡ Ø§ÙŠ Ù†Ø¯Ø§Ø±Ù… Ø¬Ø² Ø§ÙŠÙ†ÙƒÙ‡ Ø¨Ù‡ Ø®ÙˆØ§Ø³ØªÙ‡ Ù‡Ø§ÙŠ Ø¯ÙŠÚ¯Ø±Ø§Ù† ØªÙ† Ø¨Ø¯Ù‡Ù…ØŒ Ú†ÙˆÙ† Ø¯Ø± ØºÙŠØ± Ø§ÙŠÙ† ØµÙˆØ±Øª Ù…Ø±Ø§ ØªØ±Ùƒ Ù…ÙŠ ÙƒÙ†Ù†Ø¯ ÙŠØ§ Ø¯Ø± ØµØ¯Ø¯ ØªÙ„Ø§ÙÙŠ Ø¨Ø± Ù…ÙŠ Ø¢ÙŠÙ†Ø¯.",
    "Ø¯Ø± Ø±ÙˆØ§Ø¨Ø·Ù…ØŒ Ø¨Ù‡ Ø¯ÙŠÚ¯Ø±Ø§Ù† Ø§Ø¬Ø§Ø²Ù‡ Ù…ÙŠ Ø¯Ù‡Ù… ÙƒÙ‡ Ø¨Ø± Ù…Ù† Ù…Ø³Ù„Ø· Ø´ÙˆÙ†Ø¯.",
    "Ù‡Ù…ÙŠØ´Ù‡ Ø¨Ù‡ Ø¯ÙŠÚ¯Ø±Ø§Ù† Ø§Ø¬Ø§Ø²Ù‡ Ø¯Ø§Ø¯Ù‡ Ø§Ù… Ø¨Ù‡ Ø¬Ø§ÙŠ Ù…Ù† ØªØµÙ…ÙŠÙ… Ú¯ÙŠØ±Ù†Ø¯ØŒ Ø¯Ø± Ù†ØªÙŠØ¬Ù‡ Ù…Ù† ÙˆØ§Ù‚Ø¹Ø§ Ù†Ù…ÙŠ Ø¯Ø§Ù†Ù… Ú†ÙŠ Ù…ÙŠ Ø®ÙˆØ§Ù‡Ù….",
    "Ø®ÙŠÙ„ÙŠ Ø¨Ø±Ø§ÙŠÙ… Ù…Ø´ÙƒÙ„ Ø§Ø³Øª Ø§Ø² Ø¯ÙŠÚ¯Ø±Ø§Ù† ØªÙ‚Ø§Ø¶Ø§ ÙƒÙ†Ù… Ø­Ù‚ÙˆÙ‚Ù… Ø±Ø§ Ø±Ø¹Ø§ÙŠØª ÙƒÙ†Ù†Ø¯ Ùˆ Ø§Ø­Ø³Ø§Ø³Ø§ØªÙ… Ø±Ø§ Ø¯Ø±Ùƒ ÙƒÙ†Ù†Ø¯.",
    "ÙƒØ§Ø± Ù…Ø±Ø§Ù‚Ø¨Øª Ø§Ø² Ù†Ø²Ø¯ÙŠÙƒØ§Ù†Ù…ØŒ Ø±ÙˆÙŠ Ø¯ÙˆØ´ Ù…Ù† Ø§Ø³Øª.",
    "Ø¢Ø¯Ù… Ø®ÙˆØ¨ÙŠ Ù‡Ø³ØªÙ…ØŒ Ú†ÙˆÙ† Ø¨ÙŠØ´ Ø§Ø² Ø¢Ù†ÙƒÙ‡ Ø¨Ù‡ ÙÙƒØ± Ø®ÙˆØ¯Ù… Ø¨Ø§Ø´Ù…ØŒ Ø¨Ù‡ ÙÙƒØ± Ø¯ÙŠÚ¯Ø±Ø§Ù†Ù….",
    "Ù…Ù‡Ù… Ù†ÙŠØ³Øª ÙƒÙ‡ Ú†Ù‡ Ù‚Ø¯Ø± Ø³Ø±Ù… Ø´Ù„ÙˆØº Ø§Ø³ØªØŒ Ù…Ù† Ù‡Ù…ÙŠØ´Ù‡ Ù…ÙŠ ØªÙˆØ§Ù†Ù… ÙˆÙ‚ØªÙŠ Ø±Ø§ Ø¨Ø±Ø§ÙŠ Ø¯ÙŠÚ¯Ø±Ø§Ù† ÙƒÙ†Ø§Ø± Ø¨Ú¯Ø°Ø§Ø±Ù….",
    "Ù‡Ù…ÙŠØ´Ù‡ Ø³Ù†Ú¯ ØµØ¨ÙˆØ± Ù…Ø´ÙƒÙ„Ø§Øª Ø¯ÙŠÚ¯Ø±Ø§Ù† Ø¨ÙˆØ¯Ù‡ Ø§Ù….",
    "Ø¨Ù‡ Ù†Ø¸Ø± Ø¯ÙŠÚ¯Ø±Ø§Ù† Ù…Ù† Ø¨Ø±Ø§ÙŠ Ù…Ø±Ø¯Ù… Ø®ÙŠÙ„ÙŠ ÙƒØ§Ø± Ù…ÙŠ ÙƒÙ†Ù…ØŒ ÙˆÙ„ÙŠ Ø¨Ø±Ø§ÙŠ Ø®ÙˆØ¯Ù… ÙƒØ§Ø±ÙŠ Ø§Ù†Ø¬Ø§Ù… Ù†Ù…ÙŠ Ø¯Ù‡Ù….",
    "Ø§Ø² Ø§ÙŠÙ† ÙƒÙ‡ Ø§Ø­Ø³Ø§Ø³Ø§Øª Ù…Ø«Ø¨ØªÙ… (Ù…Ø«Ù„ Ù…Ø­Ø¨Øª Ùˆ ØªÙˆØ¬Ù‡) Ø±Ø§ Ø¨Ù‡ Ø¯ÙŠÚ¯Ø±Ø§Ù† Ù†Ø´Ø§Ù† Ø¯Ù‡Ù…ØŒ Ø®ÙŠÙ„ÙŠ Ø®Ø¬Ø§Ù„Øª Ù…ÙŠ ÙƒØ´Ù….",
    "Ø¨Ø±Ø§ÙŠ Ù…Ù† Ø®ÙŠÙ„ÙŠ Ø³Ø®Øª Ø§Ø³Øª ÙƒÙ‡ Ø§Ø­Ø³Ø§Ø³Ø§ØªÙ… Ø±Ø§ Ù†Ø²Ø¯ Ø¯ÙŠÚ¯Ø±Ø§Ù† Ø¨Ø±ÙˆØ² Ø¯Ù‡Ù….",
    "Ø¨Ø±Ø§ÙŠ Ù…Ù† Ø®ÙŠÙ„ÙŠ Ø³Ø®Øª Ø§Ø³Øª ÙƒÙ‡ Ø±Ø§Ø­Øª Ùˆ Ø®ÙˆØ¯Ø§Ù†Ú¯ÙŠØ®ØªÙ‡ Ø±ÙØªØ§Ø± ÙƒÙ†Ù….",
    "Ø¢Ù†Ù‚Ø¯Ø± Ø®ÙˆØ¯Ù… Ø±Ø§ ÙƒÙ†ØªØ±Ù„ Ù…ÙŠ ÙƒÙ†Ù… ÙƒÙ‡ Ù…Ø±Ø¯Ù… ÙÙƒØ± Ù…ÙŠ ÙƒÙ†Ù†Ø¯ Ø¢Ø¯Ù… Ø¨ÙŠ Ø§Ø­Ø³Ø§Ø³ÙŠ Ù‡Ø³ØªÙ….",
    "Ù…Ø±Ø¯Ù… Ù†Ø¸Ø±Ø´Ø§Ù† Ø§ÙŠÙ† Ø§Ø³Øª ÙƒÙ‡ Ù…Ù† Ø¹ØµØ¨ÙŠ Ùˆ Ù†Ø§Ø±Ø§Ø­ØªÙ….",
    "Ø¨Ø§ÙŠØ¯ Ø¯Ø± Ù‡Ø± ÙƒØ§Ø±ÙŠ Ø§Ù†Ø¬Ø§Ù… Ù…ÙŠ Ø¯Ù‡Ù… Ø¨Ù‡ØªØ±ÙŠÙ† Ø¨Ø§Ø´Ù…Ø› Ù†Ù…ÙŠ ØªÙˆØ§Ù†Ù… ØªÙˆÙ‚Ø¹Ù… Ø±Ø§ ÙƒÙ… ÙƒÙ†Ù….",
    "Ø³Ø¹ÙŠ Ù…ÙŠ ÙƒÙ†Ù… Ù†Ù‡Ø§ÙŠØª ØªÙ„Ø§Ø´ Ø®ÙˆØ¯Ù… Ø±Ø§ Ø¨ÙƒÙ†Ù…Ø› Ø®ÙˆØ¨ Ø¨ÙˆØ¯Ù† Ù†Ø³Ø¨ÙŠ ÙƒØ§Ø±ØŒ Ù‡ÙŠÚ† Ú¯Ø§Ù‡ Ù…Ø±Ø§ Ø±Ø§Ø¶ÙŠ Ù†Ù…ÙŠ ÙƒÙ†Ø¯.",
    "Ø¨Ø§ÙŠØ¯ Ø¨Ù‡ ØªÙ…Ø§Ù… Ù…Ø³Ø¦ÙˆÙ„ÙŠØª Ù‡Ø§ÙŠÙ… Ø¹Ù…Ù„ ÙƒÙ†Ù….",
    "Ø§Ø­Ø³Ø§Ø³ Ù…ÙŠ ÙƒÙ†Ù… Ø¨Ø±Ø§ÙŠ Ù¾ÙŠØ´Ø±ÙØª Ùˆ Ø¯Ø³ØªÙŠØ§Ø¨ÙŠ Ø¨Ù‡ Ø®ÙˆØ§Ø³ØªÙ‡ Ù‡Ø§ÙŠ Ø®ÙˆØ¯ Ù‡Ù…ÙˆØ§Ø±Ù‡ ØªØ­Øª ÙØ´Ø§Ø± Ù‡Ø³ØªÙ….",
    "ÙˆÙ‚ØªÙŠ ÙƒÙ‡ ÙƒØ§Ø±ÙŠ Ø±Ø§ Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ù†Ø¬Ø§Ù… Ù…ÙŠ Ø¯Ù‡Ù…ØŒ Ù†Ù…ÙŠ ØªÙˆØ§Ù†Ù… Ø®ÙˆØ¯Ù… Ø±Ø§ Ø¨Ø¨Ø®Ø´Ù… ÙŠØ§ Ø¨Ø±Ø§ÙŠ Ø§Ø´ØªØ¨Ø§Ù‡Ù… Ø¨Ù‡Ø§Ù†Ù‡ ØªØ±Ø§Ø´ÙŠ ÙƒÙ†Ù….",
    "ÙˆÙ‚ØªÙŠ Ø§Ø² ÙƒØ³ÙŠ Ú†ÙŠØ²ÙŠ Ù…ÙŠ Ø®ÙˆØ§Ù‡Ù…ØŒ Ø®ÙŠÙ„ÙŠ Ø¨Ø±Ø§ÙŠÙ… Ø³Ø®Øª Ø§Ø³Øª 'Ù†Ù‡' Ø¨Ø´Ù†ÙˆÙ….",
    "Ø¢Ø¯Ù… Ø®Ø§ØµÙŠ Ù‡Ø³ØªÙ… Ùˆ Ù†Ù…ÙŠ ØªÙˆØ§Ù†Ù… Ù…Ø­Ø¯ÙˆØ¯ÙŠØª Ù‡Ø§ÙŠÙŠ Ø±Ø§ ÙƒÙ‡ Ø¨Ø± Ø³Ø± Ø±Ø§Ù‡ Ù…Ø±Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯ØŒ Ø¨Ù¾Ø°ÙŠØ±Ù….",
    "Ø§Ø² Ø§ÙŠÙ† ÙƒÙ‡ Ù…Ø±Ø§ Ù…Ø­Ø¯ÙˆØ¯ ÙƒÙ†Ù†Ø¯ ÙŠØ§ Ù†Ú¯Ø°Ø§Ø±Ù†Ø¯ ÙƒØ§Ø±ÙŠ Ø±Ø§ ÙƒÙ‡ Ù…ÙŠ Ø®ÙˆØ§Ù‡Ù… Ø¨ÙƒÙ†Ù… Ù…ØªÙ†ÙØ±Ù….",
    "Ø§Ø­Ø³Ø§Ø³ Ù…ÙŠ ÙƒÙ†Ù… Ù†Ø¨Ø§ÙŠØ¯ Ø§Ø² Ù‚Ø§Ù†ÙˆÙ† Ù‡Ø§ Ùˆ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§ÙŠ Ø¨Ù‡Ù†Ø¬Ø§Ø±ÙŠ ÙƒÙ‡ Ù…Ø±Ø¯Ù… ØªØ§Ø¨Ø¹ Ø¢Ù†Ù‡Ø§ Ù‡Ø³ØªÙ†Ø¯ØŒ Ø§Ø·Ø§Ø¹Øª ÙƒÙ†Ù….",
    "Ø§Ø­Ø³Ø§Ø³ Ù…ÙŠ ÙƒÙ†Ù… ÙƒØ§Ø±ÙŠ ÙƒÙ‡ Ù…Ù† Ø¨Ø§ÙŠØ¯ Ø¨ÙƒÙ†Ù….",
    "Ù†Ù…ÙŠ ØªÙˆØ§Ù†Ù… Ø¨Ø±Ø§ÙŠ Ø§Ù†Ø¬Ø§Ù… ØªÙ…Ø§Ù… Ùˆ ÙƒÙ…Ø§Ù„ ÙˆØ¸Ø§ÙŠÙ Ù…Ø¹Ù…ÙˆÙ„ ÙŠØ§ Ø®Ø³ØªÙ‡ ÙƒÙ†Ù†Ø¯Ù‡ØŒ Ù†Ø¸Ù… Ùˆ Ø§Ù†Ø¶Ø¨Ø§Ø· Ø®Ø§ØµÙŠ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ù….",
    "Ø§Ú¯Ø± Ø¨Ù‡ ÙŠÙƒÙŠ Ø§Ø² Ø§Ù‡Ø¯Ø§ÙÙ… Ù†Ø±Ø³Ù…ØŒ Ø²ÙˆØ¯ Ù…Ø§ÙŠÙˆØ³ Ù…ÙŠ Ø´ÙˆÙ… Ùˆ Ø¯Ø³Øª Ø§Ø² ÙƒØ§Ø± Ù…ÙŠ ÙƒØ´ÙŠÙ….",
    "Ø¨Ø±Ø§ÙŠ Ù…Ù† Ø®ÙŠÙ„ÙŠ Ø³Ø®Øª ÙƒÙ‡ Ø±Ø¶Ø§ÙŠØª Ø¢Ù†ÙŠ Ø±Ø§ ÙØ¯Ø§ÙŠ Ø®ÙˆØ´Ø­Ø§Ù„ÙŠ Ø¢ØªÙŠ ÙƒÙ†Ù….",
    "Ù†Ù…ÙŠ ØªÙˆØ§Ù†Ù… Ø¨Ù‡ Ø®ÙˆØ¯Ù… ÙØ´Ø§Ø± Ø¨ÙŠØ§ÙˆØ±Ù… ÙƒÙ‡ ÙƒØ§Ø±Ù‡Ø§ÙŠÙŠ Ø±Ø§ ÙƒÙ‡ Ø¨Ø±Ø§ÙŠÙ… Ø®ÙˆØ´Ø§ÙŠÙ†Ø¯ Ù†ÙŠØ³ØªÙ†Ø¯ØŒ Ø§Ù†Ø¬Ø§Ù… Ø¯Ù‡Ù…ØŒ Ø­ØªÙŠ ÙˆÙ‚ØªÙŠ ÙƒÙ‡ Ù…ÙŠ Ø¯Ø§Ù†Ù… Ù†ØªØ§ÙŠØ¬ Ø®ÙˆØ¨ÙŠ Ø¯Ø± Ù¾ÙŠ Ø¯Ø§Ø±Ù†Ø¯.",
    "Ø¨Ù‡ Ù†Ø¯Ø±Øª ØªÙˆØ§Ù†Ø³ØªÙ‡ Ø§Ù… Ø¨Ù‡ ØªØµÙ…ÙŠÙ… Ø®ÙˆØ¯Ù… Ù¾Ø§ÙŠ Ø¨Ù†Ø¯ Ø¨Ø§Ø´Ù….",
]

# ---------- Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ù¾Ø§Ø³Ø® ----------
options = ["Ú©Ø§Ù…Ù„Ø§Ù‹ ØºÙ„Ø·", "ØªÙ‚Ø±ÛŒØ¨Ø§Ù‹ ØºÙ„Ø·", "Ø¨ÛŒØ´ØªØ± ØºÙ„Ø· ØªØ§ Ø¯Ø±Ø³Øª", "Ø§Ù†Ø¯Ú©ÛŒ Ø¯Ø±Ø³Øª", "ØªÙ‚Ø±ÛŒØ¨Ø§Ù‹ Ø¯Ø±Ø³Øª", "Ú©Ø§Ù…Ù„Ø§Ù‹ Ø¯Ø±Ø³Øª"]
high_values = ["ØªÙ‚Ø±ÛŒØ¨Ø§Ù‹ Ø¯Ø±Ø³Øª", "Ú©Ø§Ù…Ù„Ø§Ù‹ Ø¯Ø±Ø³Øª"]

# ---------- Ù†Ú¯Ù‡â€ŒØ¯Ø§Ø±ÛŒ Ù…ÙˆÙ‚Øª Ø¬ÙˆØ§Ø¨â€ŒÙ‡Ø§ ----------
user_answers: Dict[int, Dict] = {}

# ---------- Ù†Ú¯Ø§Ø´Øª Ø³ÙˆØ§Ù„â€ŒÙ‡Ø§ Ø¨Ù‡ Ø§ÛŒÙ†Ø¯Ú©Ø³ (schema_map) ----------
schema_map = {
    "Ù…Ø­Ø±ÙˆÙ…ÛŒØª Ù‡ÛŒØ¬Ø§Ù†ÛŒ (ED)": list(range(0, 5)),
    "Ø±Ù‡Ø§Ø´Ø¯Ú¯ÛŒ Ùˆ Ø¨ÛŒâ€ŒØ«Ø¨Ø§ØªÛŒ (AB)": list(range(5, 10)),
    "Ø¨ÛŒâ€ŒØ§Ø¹ØªÙ…Ø§Ø¯ÛŒ Ùˆ Ø¨Ø¯Ø±ÙØªØ§Ø±ÛŒ (MA)": list(range(10, 15)),
    "Ø§Ù†Ø²ÙˆØ§ÛŒ Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ (SI)": list(range(15, 20)),
    "Ù†Ù‚Øµ Ùˆ Ø´Ø±Ù… (DS)": list(range(20, 25)),
    "Ø´Ú©Ø³Øª (FA)": list(range(25, 30)),
    "ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒ Ùˆ Ø¨ÛŒâ€ŒÚ©ÙØ§ÛŒØªÛŒ (DI)": list(range(30, 35)),
    "Ø¢Ø³ÛŒØ¨â€ŒÙ¾Ø°ÛŒØ±ÛŒ Ù†Ø³Ø¨Øª Ø¨Ù‡ Ø¶Ø±Ø± ÛŒØ§ Ø¨ÛŒÙ…Ø§Ø±ÛŒ (VH)": list(range(35, 40)),
    "Ú¯Ø±ÙØªØ§Ø± Ø´Ø¯Ù† Ø¯Ø± Ø±ÙˆØ§Ø¨Ø· ÙˆØ§Ù„Ø¯ÛŒÙ†ÛŒ (EM)": list(range(40, 45)),
    "Ø§Ø·Ø§Ø¹Øª (SB)": list(range(45, 50)),
    "Ø§Ø² Ø®ÙˆØ¯Ú¯Ø°Ø´ØªÚ¯ÛŒ (SS)": list(range(50, 55)),
    "Ø¨Ø§Ø²Ø¯Ø§Ø±ÛŒ Ù‡ÛŒØ¬Ø§Ù†ÛŒ (EI)": list(range(55, 60)),
    "Ù…Ø¹ÛŒØ§Ø±Ù‡Ø§ÛŒ Ø³Ø®Øªâ€ŒÚ¯ÛŒØ±Ø§Ù†Ù‡ (US)": list(range(60, 65)),
    "Ø§Ø³ØªØ­Ù‚Ø§Ù‚ Ùˆ Ø¨Ø²Ø±Ú¯â€ŒÙ…Ù†Ø´ÛŒ (ET)": list(range(65, 70)),
    "Ø®ÙˆÛŒØ´ØªÙ†â€ŒØ¯Ø§Ø±ÛŒ Ù†Ø§Ú©Ø§ÙÛŒ (IS)": list(range(70, 75)),
}

# ---------- Ù…ØªÙ†â€ŒÙ‡Ø§ÛŒ ØªØ­Ù„ÛŒÙ„ÛŒ Ø¨Ø±Ø§ÛŒ Ø®Ø±ÙˆØ¬ÛŒ ----------
analysis_texts = {
    # ... (Ù…ØªÙ†â€ŒÙ‡Ø§ÛŒ ØªØ­Ù„ÛŒÙ„ÛŒ Ø´Ù…Ø§ - Ø¨Ø±Ø§ÛŒ Ú©ÙˆØªØ§Ù‡ÛŒ Ø­Ø°Ù Ø´Ø¯) ...
    "Ù…Ø­Ø±ÙˆÙ…ÛŒØª Ù‡ÛŒØ¬Ø§Ù†ÛŒ (ED)": "Ø´Ù…Ø§ Ù…Ù…Ú©Ù†Ù‡ Ø¯Ø± Ú©ÙˆØ¯Ú©ÛŒ Ø§Ø­Ø³Ø§Ø³ Ú©Ø±Ø¯Ù‡ Ø¨Ø§Ø´ÛŒØ¯ Ú©Ù‡ Ù†ÛŒØ§Ø²Ù‡Ø§ÛŒ Ø¹Ø§Ø·ÙÛŒâ€ŒØªÙˆÙ† Ù†Ø§Ø¯ÛŒØ¯Ù‡ Ú¯Ø±ÙØªÙ‡ Ø´Ø¯Ù‡. Ù…Ø«Ù„ Ø§Ø­Ø³Ø§Ø³ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ù…Ø­Ø¨ØªØŒ Ù‡Ù…Ø¯Ù„ÛŒ ÛŒØ§ Ø­Ù…Ø§ÛŒØª...",
    "Ø±Ù‡Ø§Ø´Ø¯Ú¯ÛŒ Ùˆ Ø¨ÛŒâ€ŒØ«Ø¨Ø§ØªÛŒ (AB)": "Ø§Ø­ØªÙ…Ø§Ù„Ø§Ù‹ Ø¯Ø± Ú©ÙˆØ¯Ú©ÛŒ Ø§Ø­Ø³Ø§Ø³ Ù†Ø§Ø§Ù…Ù†ÛŒ ÛŒØ§ Ø¨ÛŒâ€ŒØ«Ø¨Ø§ØªÛŒ Ø¯Ø± Ø±ÙˆØ§Ø¨Ø· Ù…Ù‡Ù… Ø²Ù†Ø¯Ú¯ÛŒâ€ŒØªÙˆÙ† Ø¯Ø§Ø´ØªÛŒØ¯...",
    "Ø¨ÛŒâ€ŒØ§Ø¹ØªÙ…Ø§Ø¯ÛŒ Ùˆ Ø¨Ø¯Ø±ÙØªØ§Ø±ÛŒ (MA)": "Ø´Ø§ÛŒØ¯ ØªØ¬Ø±Ø¨Ù‡â€ŒÛŒ Ø¨Ø¯Ø±ÙØªØ§Ø±ÛŒ ÛŒØ§ Ø®ÛŒØ§Ù†Øª Ø¨Ø§Ø¹Ø« Ø´Ø¯Ù‡ Ø¨Ø§Ø´Ù‡ Ú©Ù‡ Ø¨Ù‡ Ø¯ÛŒÚ¯Ø±Ø§Ù† Ù†ØªÙˆÙ†ÛŒØ¯ Ø§Ø¹ØªÙ…Ø§Ø¯ Ú©Ù†ÛŒØ¯...",
    "Ø§Ù†Ø²ÙˆØ§ÛŒ Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ (SI)": "Ù…Ù…Ú©Ù†Ù‡ Ù‡Ù…ÛŒØ´Ù‡ Ø§Ø­Ø³Ø§Ø³ Ø·Ø±Ø¯Ø´Ø¯Ú¯ÛŒ Ø¯Ø§Ø´ØªÛŒØ¯ Ùˆ ÙÚ©Ø± Ù…ÛŒâ€ŒÚ©Ø±Ø¯ÛŒØ¯ Ø¨Ø§ Ø¯ÛŒÚ¯Ø±Ø§Ù† Ù…ØªÙØ§ÙˆØªÛŒØ¯...",
    "Ù†Ù‚Øµ Ùˆ Ø´Ø±Ù… (DS)": "Ù…Ù…Ú©Ù†Ù‡ Ø§Ø­Ø³Ø§Ø³ Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯ Ø¨Ù‡ Ø§Ù†Ø¯Ø§Ø²Ù‡â€ŒÛŒ Ú©Ø§ÙÛŒ Ø®ÙˆØ¨ ÛŒØ§ Ø¯ÙˆØ³Øªâ€ŒØ¯Ø§Ø´ØªÙ†ÛŒ Ù†ÛŒØ³ØªÛŒØ¯...",
    "Ø´Ú©Ø³Øª (FA)": "Ø§Ø­Ø³Ø§Ø³ Ù†Ø§Ú©Ø§Ù…ÛŒ Ø¯Ø± Ø±Ø³ÛŒØ¯Ù† Ø¨Ù‡ Ù…ÙˆÙÙ‚ÛŒØª ÛŒØ§ ØªØ±Ø³ Ø§Ø² Ø´Ú©Ø³Øª Ù…Ù…Ú©Ù†Ù‡ Ù‡Ù…ÛŒØ´Ù‡ Ù‡Ù…Ø±Ø§Ù‡â€ŒØªÙˆÙ† Ø¨ÙˆØ¯Ù‡ Ø¨Ø§Ø´Ù‡...",
    "ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒ Ùˆ Ø¨ÛŒâ€ŒÚ©ÙØ§ÛŒØªÛŒ (DI)": "Ø§Ø­Ø³Ø§Ø³ Ù†Ø§ØªÙˆØ§Ù†ÛŒ Ø¯Ø± Ø§Ù†Ø¬Ø§Ù… Ú©Ø§Ø±Ù‡Ø§ Ø¨Ø¯ÙˆÙ† Ú©Ù…Ú© Ø¯ÛŒÚ¯Ø±Ø§Ù†ØŒ Ù…Ù…Ú©Ù†Ù‡ Ø§Ø² Ú©ÙˆØ¯Ú©ÛŒ Ø¨Ø§ Ø´Ù…Ø§ Ø¨ÙˆØ¯Ù‡ Ø¨Ø§Ø´Ù‡...",
    "Ø¢Ø³ÛŒØ¨â€ŒÙ¾Ø°ÛŒØ±ÛŒ Ù†Ø³Ø¨Øª Ø¨Ù‡ Ø¶Ø±Ø± ÛŒØ§ Ø¨ÛŒÙ…Ø§Ø±ÛŒ (VH)": "Ø´Ø§ÛŒØ¯ Ù‡Ù…ÛŒØ´Ù‡ Ù†Ú¯Ø±Ø§Ù† Ø§ÛŒÙ† Ø¨ÙˆØ¯ÛŒØ¯ Ú©Ù‡ Ø§ØªÙØ§Ù‚ Ø¨Ø¯ÛŒ Ø¨ÛŒÙØªÙ‡ØŒ ÛŒØ§ Ø³Ù„Ø§Ù…ØªÛŒâ€ŒØªÙˆÙ† Ø¯Ø± Ø®Ø·Ø± Ø¨Ø§Ø´Ù‡...",
    "Ú¯Ø±ÙØªØ§Ø± Ø´Ø¯Ù† Ø¯Ø± Ø±ÙˆØ§Ø¨Ø· ÙˆØ§Ù„Ø¯ÛŒÙ†ÛŒ (EM)": "Ø´Ø§ÛŒØ¯ Ø§Ø­Ø³Ø§Ø³ Ú©Ø±Ø¯ÛŒØ¯ Ø¨Ø§ÛŒØ¯ Ù†Ù‚Ø´ Ø¨Ø²Ø±Ú¯Ø³Ø§Ù„ Ø±Ùˆ Ø¯Ø± Ø®Ø§Ù†ÙˆØ§Ø¯Ù‡ Ø¨Ø§Ø²ÛŒ Ú©Ù†ÛŒØ¯ ÛŒØ§ Ø¨Ø§Ø± Ø§Ø­Ø³Ø§Ø³Ø§Øª ÙˆØ§Ù„Ø¯ÛŒÙ†â€ŒØªÙˆÙ† Ø±Ùˆ Ø¨Ù‡ Ø¯ÙˆØ´ Ø¨Ú©Ø´ÛŒØ¯...",
    "Ø§Ø·Ø§Ø¹Øª (SB)": "Ø´Ø§ÛŒØ¯ Ø¨Ù‡ Ø®Ø§Ø·Ø± Ú¯Ø±ÙØªÙ† ØªØ£ÛŒÛŒØ¯ØŒ Ù‡Ù…ÛŒØ´Ù‡ Ø®ÙˆØ§Ø³ØªÙ‡â€ŒÙ‡Ø§ÛŒ Ø¯ÛŒÚ¯Ø±Ø§Ù† Ø±Ùˆ Ø¨Ù‡ Ø®ÙˆØ§Ø³ØªÙ‡â€ŒÙ‡Ø§ÛŒ Ø®ÙˆØ¯ØªÙˆÙ† ØªØ±Ø¬ÛŒØ­ Ø¯Ø§Ø¯ÛŒØ¯...",
    "Ø§Ø² Ø®ÙˆØ¯Ú¯Ø°Ø´ØªÚ¯ÛŒ (SS)": "Ù…Ù…Ú©Ù†Ù‡ Ø¨ÛŒØ´ØªØ± Ø§Ø² Ù†ÛŒØ§Ø²Ù‡Ø§ÛŒ Ø®ÙˆØ¯ØªÙˆÙ†ØŒ Ø¨Ù‡ Ù†ÛŒØ§Ø²Ù‡Ø§ÛŒ Ø¯ÛŒÚ¯Ø±Ø§Ù† Ø§Ù‡Ù…ÛŒØª Ø¨Ø¯ÛŒØ¯ Ùˆ Ø§Ø­Ø³Ø§Ø³ Ø®Ø³ØªÚ¯ÛŒ ÛŒØ§ ÙØ±Ø§Ù…ÙˆØ´â€ŒØ´Ø¯Ù† Ú©Ù†ÛŒØ¯...",
    "Ø¨Ø§Ø²Ø¯Ø§Ø±ÛŒ Ù‡ÛŒØ¬Ø§Ù†ÛŒ (EI)": "Ø§Ø­ØªÙ…Ø§Ù„Ø§Ù‹ Ø¨ÛŒØ§Ù† Ø§Ø­Ø³Ø§Ø³Ø§Øª Ø¨Ø±Ø§ØªÙˆÙ† Ø³Ø®ØªÙ‡ Ùˆ Ú©Ù†ØªØ±Ù„ Ø¹ÙˆØ§Ø·Ù ØªØ¨Ø¯ÛŒÙ„ Ø¨Ù‡ Ø¹Ø§Ø¯Øª Ø´Ø¯Ù‡ØŒ Ø­ØªÛŒ ÙˆÙ‚ØªÛŒ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø§Ø¨Ø±Ø§Ø² Ù‡Ø³Øª...",
    "Ù…Ø¹ÛŒØ§Ø±Ù‡Ø§ÛŒ Ø³Ø®Øªâ€ŒÚ¯ÛŒØ±Ø§Ù†Ù‡ (US)": "Ø§Ø­ØªÙ…Ø§Ù„Ø§Ù‹ Ø§Ø² Ø®ÙˆØ¯ØªÙˆÙ† ØªÙˆÙ‚Ø¹Ø§Øª Ø®ÛŒÙ„ÛŒ Ø¨Ø§Ù„Ø§ Ø¯Ø§Ø±ÛŒØ¯ Ùˆ Ø¨Ù‡ Ø³Ø®ØªÛŒ Ø¨Ù‡ Ø®ÙˆØ¯ØªÙˆÙ† Ø§Ø¬Ø§Ø²Ù‡ Ø§Ø³ØªØ±Ø§Ø­Øª ÛŒØ§ Ø§Ø´ØªØ¨Ø§Ù‡ Ù…ÛŒâ€ŒØ¯ÛŒØ¯...",
    "Ø§Ø³ØªØ­Ù‚Ø§Ù‚ Ùˆ Ø¨Ø²Ø±Ú¯â€ŒÙ…Ù†Ø´ÛŒ (ET)": "Ù…Ù…Ú©Ù†Ù‡ Ø­Ø³ Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯ Ø­Ù‚ Ø¯Ø§Ø±ÛŒØ¯ Ù‡Ù…ÛŒØ´Ù‡ ØªÙˆØ¬Ù‡ ÛŒØ§ Ø§Ù…ØªÛŒØ§Ø² Ø®Ø§ØµÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒØ¯ØŒ ÛŒØ§ Ø¯ÛŒÚ¯Ø±Ø§Ù† Ø¨Ø§ÛŒØ¯ Ù‡Ù…ÛŒØ´Ù‡ Ù…Ø·Ø§Ø¨Ù‚ Ù…ÛŒÙ„ Ø´Ù…Ø§ Ø±ÙØªØ§Ø± Ú©Ù†Ù†Ø¯...",
    "Ø®ÙˆÛŒØ´ØªÙ†â€ŒØ¯Ø§Ø±ÛŒ Ù†Ø§Ú©Ø§ÙÛŒ (IS)": "Ø´Ø§ÛŒØ¯ Ø¯Ø± Ú©Ù†ØªØ±Ù„ ØªÚ©Ø§Ù†Ù‡â€ŒÙ‡Ø§ØŒ Ù†Ø¸Ù… Ø´Ø®ØµÛŒ ÛŒØ§ Ø±Ø³ÛŒØ¯Ù† Ø¨Ù‡ Ø§Ù‡Ø¯Ø§Ù Ø¨Ù„Ù†Ø¯Ù…Ø¯Øª Ø¯Ú†Ø§Ø± Ù…Ø´Ú©Ù„ Ø¨Ø§Ø´ÛŒØ¯...",
}


# ---------- Helper: Ø³Ø§Ø®Øª Ú©ÛŒØ¨ÙˆØ±Ø¯ Ø³ÙˆØ§Ù„ ----------
def build_keyboard(include_back=True):
    kb = [
        [
            InlineKeyboardButton("Ú©Ø§Ù…Ù„Ø§Ù‹ ØºÙ„Ø·", callback_data="Ú©Ø§Ù…Ù„Ø§Ù‹ ØºÙ„Ø·"),
            InlineKeyboardButton("ØªÙ‚Ø±ÛŒØ¨Ø§Ù‹ ØºÙ„Ø·", callback_data="ØªÙ‚Ø±ÛŒØ¨Ø§Ù‹ ØºÙ„Ø·"),
        ],
        [
            InlineKeyboardButton("Ø¨ÛŒØ´ØªØ± ØºÙ„Ø· ØªØ§ Ø¯Ø±Ø³Øª", callback_data="Ø¨ÛŒØ´ØªØ± ØºÙ„Ø· ØªØ§ Ø¯Ø±Ø³Øª"),
            InlineKeyboardButton("Ø§Ù†Ø¯Ú©ÛŒ Ø¯Ø±Ø³Øª", callback_data="Ø§Ù†Ø¯Ú©ÛŒ Ø¯Ø±Ø³Øª"),
        ],
        [
            InlineKeyboardButton("ØªÙ‚Ø±ÛŒØ¨Ø§Ù‹ Ø¯Ø±Ø³Øª", callback_data="ØªÙ‚Ø±ÛŒØ¨Ø§Ù‹ Ø¯Ø±Ø³Øª"),
            InlineKeyboardButton("Ú©Ø§Ù…Ù„Ø§Ù‹ Ø¯Ø±Ø³Øª", callback_data="Ú©Ø§Ù…Ù„Ø§Ù‹ Ø¯Ø±Ø³Øª"),
        ],
    ]
    if include_back:
        kb.append([InlineKeyboardButton("ðŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ø³ÙˆØ§Ù„ Ù‚Ø¨Ù„", callback_data="BACK")])
    return InlineKeyboardMarkup(kb)


# ---------- Ø¢ØºØ§Ø² ØªØ³Øª ----------
async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    # ... (Ú©Ø¯ ØªØ§Ø¨Ø¹ start Ø´Ù…Ø§ - Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ±) ...
    if update.callback_query:
        await update.callback_query.answer()
        chat = update.callback_query.message.chat
    else:
        chat = update.effective_chat

    user_id = chat.id
    user_answers[user_id] = {"index": 0, "answers": [], "last_msg_id": None}

    welcome = (
        "Ø³Ù„Ø§Ù…! Ø¨Ù‡ Ø±Ø¨Ø§Øª ØªØ³Øª Ø·Ø±Ø­ÙˆØ§Ø±Ù‡ ÛŒØ§Ù†Ú¯ Ø®ÙˆØ´ Ø§ÙˆÙ…Ø¯ÛŒ ðŸŒ±\n\n"
        "Ø¯Ø± Ú©Ù…ØªØ± Ø§Ø² Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡ Ú†Ù†Ø¯ Ø³ÙˆØ§Ù„ Ù…ÛŒâ€ŒÙ¾Ø±Ø³Ù…. Ø³Ø¹ÛŒ Ú©Ù† Ø¬ÙˆØ§Ø¨â€ŒÙ‡Ø§ Ø±Ùˆ Ø¨Ø± Ø§Ø³Ø§Ø³ Ú©ÙˆØ¯Ú©ÛŒ ØªØ§ Ø³Ù† Û±Û² Ø³Ø§Ù„Ú¯ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒ.\n"
        "Ù‡Ø± Ø³ÙˆØ§Ù„ Ø¯Ø§Ø±Ø§ÛŒ Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ø³Ø§Ø¯Ù‡â€ŒØ³Øª. ÙˆÙ‚ØªÛŒ Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ§ÛŒØŒ Ø´Ø±ÙˆØ¹ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…."
    )
    await context.bot.send_message(chat_id=chat.id, text=welcome)

    return await ask_question(update, context)


# ---------- Ø§Ø±Ø³Ø§Ù„ Ø³ÙˆØ§Ù„ ----------
async def ask_question(update: Update, context: ContextTypes.DEFAULT_TYPE):
    # ... (Ú©Ø¯ ØªØ§Ø¨Ø¹ ask_question Ø´Ù…Ø§ - Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ±) ...
    query = update.callback_query if update.callback_query else None
    if query:
        await query.answer()
        user_id = query.from_user.id
    else:
        user_id = update.effective_user.id

    if user_id not in user_answers:
        user_answers[user_id] = {"index": 0, "answers": [], "last_msg_id": None}

    current = user_answers[user_id]["index"]

    if current >= len(questions):
        return await finish_test(update, context)

    text = f"Ø³ÙˆØ§Ù„ {current + 1} Ø§Ø² {len(questions)}:\n\n{questions[current]}\n\n(Ø¨Ø±Ø§ÛŒ Ø¨Ø±Ú¯Ø´Øª: Ø§Ø² Ø¯Ú©Ù…Ù‡ 'ðŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ø³ÙˆØ§Ù„ Ù‚Ø¨Ù„' Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.)"

    last_msg_id = user_answers[user_id].get("last_msg_id")
    if last_msg_id:
        try:
            await context.bot.delete_message(chat_id=user_id, message_id=last_msg_id)
        except Exception:
            pass

    sent = await context.bot.send_message(chat_id=user_id, text=text, reply_markup=build_keyboard())
    user_answers[user_id]["last_msg_id"] = sent.message_id

    return ASKING_QUESTION


# ---------- Ù…Ø¯ÛŒØ±ÛŒØª Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ ----------
async def handle_answer(update: Update, context: ContextTypes.DEFAULT_TYPE):
    # ... (Ú©Ø¯ ØªØ§Ø¨Ø¹ handle_answer Ø´Ù…Ø§ - Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ±) ...
    query = update.callback_query
    if not query:
        return ASKING_QUESTION

    await query.answer()
    user_id = query.from_user.id
    data = query.data

    if data == "BACK":
        if user_answers[user_id]["index"] > 0:
            if user_answers[user_id]["answers"]:
                user_answers[user_id]["answers"].pop()
            user_answers[user_id]["index"] -= 1
        return await ask_question(update, context)

    if data == "restart_test":
        return await restart_test(update, context)

    if data not in options:
        return await ask_question(update, context)

    user_answers[user_id]["answers"].append(data)
    user_answers[user_id]["index"] += 1

    return await ask_question(update, context)


# ---------- ØªØ§Ø¨Ø¹ Ø´Ø±ÙˆØ¹ Ù…Ø¬Ø¯Ø¯ ----------
async def restart_test(update: Update, context: ContextTypes.DEFAULT_TYPE):
    # ... (Ú©Ø¯ ØªØ§Ø¨Ø¹ restart_test Ø´Ù…Ø§ - Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ±) ...
    query = update.callback_query
    if query:
        await query.answer()
        user_id = query.from_user.id
    else:
        user_id = update.effective_user.id

    user_answers[user_id] = {"index": 0, "answers": [], "last_msg_id": None}
    return await ask_question(update, context)


# ---------- ØªØ§Ø¨Ø¹ Ù¾Ø§ÛŒØ§Ù† Ùˆ ØªØ­Ù„ÛŒÙ„ ----------
async def finish_test(update: Update, context: ContextTypes.DEFAULT_TYPE):
    # ... (Ú©Ø¯ ØªØ§Ø¨Ø¹ finish_test Ø´Ù…Ø§ - Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ±) ...
    if update.callback_query:
        user_id = update.callback_query.from_user.id
    elif update.message:
        user_id = update.effective_user.id
    else:
        return ConversationHandler.END

    answers = user_answers.get(user_id, {}).get("answers", [])

    if not answers or len(answers) < len(questions):
        msg = update.callback_query.message if update.callback_query else update.message
        await msg.reply_text("â—ï¸ØªØ¹Ø¯Ø§Ø¯ Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ Ú©Ø§Ù…Ù„ Ù†ÛŒØ³Øª. Ù„Ø·ÙØ§Ù‹ ØªÙ…Ø§Ù… Ø³ÙˆØ§Ù„Ø§Øª Ø±Ø§ Ù¾Ø§Ø³Ø® Ø¯Ù‡ÛŒØ¯.")
        return ConversationHandler.END

    scores = {schema: 0 for schema in schema_map}
    for schema, indices in schema_map.items():
        for i in indices:
            if i < len(answers) and answers[i] in high_values:
                scores[schema] += 1

    sorted_schemas = sorted(scores.items(), key=lambda x: x[1], reverse=True)
    top_schema, top_score = sorted_schemas[0]

    analysis = analysis_texts.get(top_schema, "ØªÙˆØ¶ÛŒØ­ÛŒ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ø·Ø±Ø­ÙˆØ§Ø±Ù‡ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.")

    second_third = "\n".join([f"â€¢ {s[0]} â€” {s[1]} Ø§Ù…ØªÛŒØ§Ø²" for s in sorted_schemas[1:3]])

    text = f"""ðŸŽ¯ ØªØ­Ù„ÛŒÙ„ Ù†Ù‡Ø§ÛŒÛŒ ØªØ³Øª Ø·Ø±Ø­ÙˆØ§Ø±Ù‡ ÛŒØ§Ù†Ú¯ Ø´Ù…Ø§:

ðŸ” Ø¨ÛŒØ´ØªØ±ÛŒÙ† Ù†Ù…Ø±Ù‡ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ø·Ø±Ø­ÙˆØ§Ø±Ù‡ Ø²ÛŒØ±Ù‡:

â­ï¸ {top_schema} â€” {top_score} Ø§Ù…ØªÛŒØ§Ø²
{analysis}

ðŸ”¹ Ø±ØªØ¨Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø¹Ø¯ÛŒ Ø´Ù…Ø§:
{second_third}

ðŸ“Œ Ø§Ú¯Ø± Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒ Ø¯Ù‚ÛŒÙ‚â€ŒØªØ± Ø¨Ø¯ÙˆÙ†ÛŒ Ø§ÛŒÙ† Ø·Ø±Ø­ÙˆØ§Ø±Ù‡ Ú†Ù‡ ØªØ£Ø«ÛŒØ±ÛŒ Ø±ÙˆÛŒ Ø²Ù†Ø¯Ú¯ÛŒØª Ú¯Ø°Ø§Ø´ØªÙ‡ Ùˆ Ú†Ø·ÙˆØ± Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒ Ø¨Ø§Ù‡Ø§Ø´ Ù…Ù‚Ø§Ø¨Ù„Ù‡ Ú©Ù†ÛŒØŒ Ø¨Ù‡ Ø¨Ø§Ø´Ú¯Ø§Ù‡ Ø±Ø´Ø¯ Ø°Ù‡Ù†ÛŒ Â«Ø±ÙˆÛŒØ´Â» Ø¨Ù¾ÛŒÙˆÙ†Ø¯!

ðŸ‘‡ Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª ØªÙ…Ø±ÛŒÙ†â€ŒÙ‡Ø§ÛŒ ØªØ®ØµØµÛŒ Ø±ÙˆÛŒ Ø§ÛŒÙ† Ø·Ø±Ø­ÙˆØ§Ø±Ù‡:"""

    keyboard = InlineKeyboardMarkup(
        [
            [InlineKeyboardButton("ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø¨Ø§Ø´Ú¯Ø§Ù‡ Ø±ÙˆÛŒØ´", url="https://rooyesh.club/")],
            [InlineKeyboardButton("ØµÙØ­Ù‡ Ø§ÛŒÙ†Ø³ØªØ§Ú¯Ø±Ø§Ù… Ø±ÙˆÛŒØ´", url="https://www.instagram.com/rooyesh.club/")],
            [InlineKeyboardButton("ðŸ” ØªØ³Øª Ù…Ø¬Ø¯Ø¯", callback_data="restart_test")],
        ]
    )

    if update.callback_query:
        await update.callback_query.message.reply_text(text, reply_markup=keyboard)
    else:
        await update.message.reply_text(text, reply_markup=keyboard)

    if user_id in user_answers:
        del user_answers[user_id]

    return ConversationHandler.END


# ---------- main Ùˆ Ø§ÙØ²ÙˆØ¯Ù† Ù‡Ù†Ø¯Ù„Ø±Ù‡Ø§ (Ø¨Ø®Ø´ Ø§ØµÙ„Ø§Ø­ Ø´Ø¯Ù‡) ----------
def main():
    # --- ØªØºÛŒÛŒØ± Ú©Ù„ÛŒØ¯ÛŒ: Ø®ÙˆØ§Ù†Ø¯Ù† ØªÙˆÚ©Ù† Ø§Ø² Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ù…Ø­ÛŒØ·ÛŒ ---
    # Ú©Ø¯ ØªÙˆÚ©Ù† Ø´Ù…Ø§ Ø±Ø§ Ø§Ø² ØªÙ†Ø¸ÛŒÙ…Ø§Øª "Run Configuration" Ú©Ù‡ Ø¯Ø± PyCharm Ø³Øª Ú©Ø±Ø¯ÛŒØ¯ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù†Ø¯
    TOKEN = os.environ.get("TELEGRAM_TOKEN")

    if not TOKEN:
        # Ø§Ú¯Ø± ØªÙˆÚ©Ù† Ø±Ø§ Ø¯Ø± ØªÙ†Ø¸ÛŒÙ…Ø§Øª PyCharm Ø³Øª Ù†Ú©Ø±Ø¯Ù‡ Ø¨Ø§Ø´ÛŒØ¯ØŒ Ø§ÛŒÙ† Ø®Ø·Ø§ Ú†Ø§Ù¾ Ù…ÛŒâ€ŒØ´ÙˆØ¯
        logger.error("!!! Ø®Ø·Ø§ÛŒ Ø¨Ø­Ø±Ø§Ù†ÛŒ: ØªÙˆÚ©Ù† Ø±Ø¨Ø§Øª (TELEGRAM_TOKEN) Ø¯Ø± Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ù…Ø­ÛŒØ·ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯!")
        logger.error("!!! Ù„Ø·ÙØ§Ù‹ Ø¨Ù‡ 'Edit Configurations' Ø¨Ø±ÙˆÛŒØ¯ Ùˆ Ù…ØªØºÛŒØ± Ù…Ø­ÛŒØ·ÛŒ TELEGRAM_TOKEN Ø±Ø§ ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒØ¯.")
        return  # Ø§Ú¯Ø± ØªÙˆÚ©Ù† Ù†Ø¨Ø§Ø´Ø¯ØŒ Ø±Ø¨Ø§Øª Ø§Ø¬Ø±Ø§ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯
    # --------------------------------------------------

    app = ApplicationBuilder().token(TOKEN).build()

    conv = ConversationHandler(
        entry_points=[CommandHandler("start", start)],
        states={
            ASKING_QUESTION: [
                CallbackQueryHandler(handle_answer),  # Ù‡Ù…Ù‡ callbackÙ‡Ø§ Ø§ÛŒÙ†Ùˆ Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ù†
            ],
        },
        fallbacks=[CommandHandler("start", start)],  # Ø§Ø¬Ø§Ø²Ù‡ Ø±ÛŒâ€ŒØ§Ø³ØªØ§Ø±Øª Ø¯Ø± Ù‡Ø± Ø²Ù…Ø§Ù†
        allow_reentry=True,
        per_message=False,
    )

    app.add_handler(conv)

    print("Ø±Ø¨Ø§Øª Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Øª âœ… (ØªÙˆÚ©Ù† Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯)")
    app.run_polling()


if __name__ == "__main__":
    main()
